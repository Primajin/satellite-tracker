(function(){"use strict";const{Array:re,Object:z,Number:ie,Math:I,Error:y,Uint8Array:g,Uint16Array:rt,Uint32Array:ae,Int32Array:it,Map:oe,DataView:F,Promise:N,TextEncoder:ce,crypto:x,postMessage:U,TransformStream:k,ReadableStream:xe,WritableStream:Ue,CompressionStream:at,DecompressionStream:ot}=self,le=void 0,O="undefined",X="function",ue=[];for(let t=0;256>t;t++){let e=t;for(let n=0;8>n;n++)1&e?e=e>>>1^3988292384:e>>>=1;ue[t]=e}class J{constructor(e){this.crc=e||-1}append(e){let n=0|this.crc;for(let s=0,r=0|e.length;r>s;s++)n=n>>>8^ue[255&(n^e[s])];this.crc=n}get(){return~this.crc}}class he extends k{constructor(){let e;const n=new J;super({transform(s,r){n.append(s),r.enqueue(s)},flush(){const s=new g(4);new F(s.buffer).setUint32(0,n.get()),e.value=s}}),e=this}}const S={concat(t,e){if(t.length===0||e.length===0)return t.concat(e);const n=t[t.length-1],s=S.getPartial(n);return s===32?t.concat(e):S._shiftRight(e,s,0|n,t.slice(0,t.length-1))},bitLength(t){const e=t.length;if(e===0)return 0;const n=t[e-1];return 32*(e-1)+S.getPartial(n)},clamp(t,e){if(32*t.length<e)return t;const n=(t=t.slice(0,I.ceil(e/32))).length;return e&=31,n>0&&e&&(t[n-1]=S.partial(e,t[n-1]&2147483648>>e-1,1)),t},partial:(t,e,n)=>t===32?e:(n?0|e:e<<32-t)+1099511627776*t,getPartial:t=>I.round(t/1099511627776)||32,_shiftRight(t,e,n,s){for(s===void 0&&(s=[]);e>=32;e-=32)s.push(n),n=0;if(e===0)return s.concat(t);for(let i=0;i<t.length;i++)s.push(n|t[i]>>>e),n=t[i]<<32-e;const r=t.length?t[t.length-1]:0,a=S.getPartial(r);return s.push(S.partial(e+a&31,e+a>32?n:s.pop(),1)),s}},j={bytes:{fromBits(t){const e=S.bitLength(t)/8,n=new g(e);let s;for(let r=0;e>r;r++)3&r||(s=t[r/4]),n[r]=s>>>24,s<<=8;return n},toBits(t){const e=[];let n,s=0;for(n=0;n<t.length;n++)s=s<<8|t[n],3&~n||(e.push(s),s=0);return 3&n&&e.push(S.partial(8*(3&n),s)),e}}},We=class{constructor(t){const e=this;e.blockSize=512,e._init=[1732584193,4023233417,2562383102,271733878,3285377520],e._key=[1518500249,1859775393,2400959708,3395469782],t?(e._h=t._h.slice(0),e._buffer=t._buffer.slice(0),e._length=t._length):e.reset()}reset(){const t=this;return t._h=t._init.slice(0),t._buffer=[],t._length=0,t}update(t){const e=this;typeof t=="string"&&(t=j.utf8String.toBits(t));const n=e._buffer=S.concat(e._buffer,t),s=e._length,r=e._length=s+S.bitLength(t);if(r>9007199254740991)throw new y("Cannot hash more than 2^53 - 1 bits");const a=new ae(n);let i=0;for(let l=e.blockSize+s-(e.blockSize+s&e.blockSize-1);r>=l;l+=e.blockSize)e._block(a.subarray(16*i,16*(i+1))),i+=1;return n.splice(0,16*i),e}finalize(){const t=this;let e=t._buffer;const n=t._h;e=S.concat(e,[S.partial(1,1)]);for(let s=e.length+2;15&s;s++)e.push(0);for(e.push(I.floor(t._length/4294967296)),e.push(0|t._length);e.length;)t._block(e.splice(0,16));return t.reset(),n}_f(t,e,n,s){return t>19?t>39?t>59?t>79?void 0:e^n^s:e&n|e&s|n&s:e^n^s:e&n|~e&s}_S(t,e){return e<<t|e>>>32-t}_block(t){const e=this,n=e._h,s=re(80);for(let c=0;16>c;c++)s[c]=t[c];let r=n[0],a=n[1],i=n[2],l=n[3],h=n[4];for(let c=0;79>=c;c++){16>c||(s[c]=e._S(1,s[c-3]^s[c-8]^s[c-14]^s[c-16]));const o=e._S(5,r)+e._f(c,a,i,l)+h+s[c]+e._key[I.floor(c/20)]|0;h=l,l=i,i=e._S(30,a),a=r,r=o}n[0]=n[0]+r|0,n[1]=n[1]+a|0,n[2]=n[2]+i|0,n[3]=n[3]+l|0,n[4]=n[4]+h|0}},Me={getRandomValues(t){const e=new ae(t.buffer),n=s=>{let r=987654321;const a=4294967295;return()=>(r=36969*(65535&r)+(r>>16)&a,(((r<<16)+(s=18e3*(65535&s)+(s>>16)&a)&a)/4294967296+.5)*(I.random()>.5?1:-1))};for(let s,r=0;r<t.length;r+=4){const a=n(4294967296*(s||I.random()));s=987654071*a(),e[r/4]=4294967296*a()|0}return t}},P={importKey:t=>new P.hmacSha1(j.bytes.toBits(t)),pbkdf2(t,e,n,s){if(n=n||1e4,0>s||0>n)throw new y("invalid params to pbkdf2");const r=1+(s>>5)<<2;let a,i,l,h,c;const o=new ArrayBuffer(r),u=new F(o);let f=0;const d=S;for(e=j.bytes.toBits(e),c=1;(r||1)>f;c++){for(a=i=t.encrypt(d.concat(e,[c])),l=1;n>l;l++)for(i=t.encrypt(i),h=0;h<i.length;h++)a[h]^=i[h];for(l=0;(r||1)>f&&l<a.length;l++)u.setInt32(f,a[l]),f+=4}return o.slice(0,s/8)},hmacSha1:class{constructor(t){const e=this,n=e._hash=We,s=[[],[]];e._baseHash=[new n,new n];const r=e._baseHash[0].blockSize/32;t.length>r&&(t=new n().update(t).finalize());for(let a=0;r>a;a++)s[0][a]=909522486^t[a],s[1][a]=1549556828^t[a];e._baseHash[0].update(s[0]),e._baseHash[1].update(s[1]),e._resultHash=new n(e._baseHash[0])}reset(){const t=this;t._resultHash=new t._hash(t._baseHash[0]),t._updated=!1}update(t){this._updated=!0,this._resultHash.update(t)}digest(){const t=this,e=t._resultHash.finalize(),n=new t._hash(t._baseHash[1]).update(e).finalize();return t.reset(),n}encrypt(t){if(this._updated)throw new y("encrypt on already updated hmac called!");return this.update(t),this.digest(t)}}},Ee=typeof x!=O&&typeof x.getRandomValues==X,fe="Invalid password",pe="Invalid signature",de="zipjs-abort-check-password";function we(t){return Ee?x.getRandomValues(t):Me.getRandomValues(t)}const T=16,ge={name:"PBKDF2"},De=z.assign({hash:{name:"HMAC"}},ge),Q=z.assign({iterations:1e3,hash:{name:"SHA-1"}},ge),Le=["deriveBits"],W=[8,12,16],M=[16,24,32],q=10,Ze=[0,0,0,0],G=typeof x!=O,E=G&&x.subtle,me=G&&typeof E!=O,B=j.bytes,Fe=class{constructor(t){const e=this;e._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],e._tables[0][0][0]||e._precompute();const n=e._tables[0][4],s=e._tables[1],r=t.length;let a,i,l,h=1;if(r!==4&&r!==6&&r!==8)throw new y("invalid aes key size");for(e._key=[i=t.slice(0),l=[]],a=r;4*r+28>a;a++){let c=i[a-1];(a%r===0||r===8&&a%r===4)&&(c=n[c>>>24]<<24^n[c>>16&255]<<16^n[c>>8&255]<<8^n[255&c],a%r===0&&(c=c<<8^c>>>24^h<<24,h=h<<1^283*(h>>7))),i[a]=i[a-r]^c}for(let c=0;a;c++,a--){const o=i[3&c?a:a-4];l[c]=4>=a||4>c?o:s[0][n[o>>>24]]^s[1][n[o>>16&255]]^s[2][n[o>>8&255]]^s[3][n[255&o]]}}encrypt(t){return this._crypt(t,0)}decrypt(t){return this._crypt(t,1)}_precompute(){const t=this._tables[0],e=this._tables[1],n=t[4],s=e[4],r=[],a=[];let i,l,h,c;for(let o=0;256>o;o++)a[(r[o]=o<<1^283*(o>>7))^o]=o;for(let o=i=0;!n[o];o^=l||1,i=a[i]||1){let u=i^i<<1^i<<2^i<<3^i<<4;u=u>>8^255&u^99,n[o]=u,s[u]=o,c=r[h=r[l=r[o]]];let f=16843009*c^65537*h^257*l^16843008*o,d=257*r[u]^16843008*u;for(let p=0;4>p;p++)t[p][o]=d=d<<24^d>>>8,e[p][u]=f=f<<24^f>>>8}for(let o=0;5>o;o++)t[o]=t[o].slice(0),e[o]=e[o].slice(0)}_crypt(t,e){if(t.length!==4)throw new y("invalid aes block size");const n=this._key[e],s=n.length/4-2,r=[0,0,0,0],a=this._tables[e],i=a[0],l=a[1],h=a[2],c=a[3],o=a[4];let u,f,d,p=t[0]^n[0],w=t[e?3:1]^n[1],m=t[2]^n[2],b=t[e?1:3]^n[3],C=4;for(let R=0;s>R;R++)u=i[p>>>24]^l[w>>16&255]^h[m>>8&255]^c[255&b]^n[C],f=i[w>>>24]^l[m>>16&255]^h[b>>8&255]^c[255&p]^n[C+1],d=i[m>>>24]^l[b>>16&255]^h[p>>8&255]^c[255&w]^n[C+2],b=i[b>>>24]^l[p>>16&255]^h[w>>8&255]^c[255&m]^n[C+3],C+=4,p=u,w=f,m=d;for(let R=0;4>R;R++)r[e?3&-R:R]=o[p>>>24]<<24^o[w>>16&255]<<16^o[m>>8&255]<<8^o[255&b]^n[C++],u=p,p=w,w=m,m=b,b=u;return r}},Ne=class{constructor(t,e){this._prf=t,this._initIv=e,this._iv=e}reset(){this._iv=this._initIv}update(t){return this.calculate(this._prf,t,this._iv)}incWord(t){if(255&~(t>>24))t+=1<<24;else{let e=t>>16&255,n=t>>8&255,s=255&t;e===255?(e=0,n===255?(n=0,s===255?s=0:++s):++n):++e,t=0,t+=e<<16,t+=n<<8,t+=s}return t}incCounter(t){(t[0]=this.incWord(t[0]))===0&&(t[1]=this.incWord(t[1]))}calculate(t,e,n){let s;if(!(s=e.length))return[];const r=S.bitLength(e);for(let a=0;s>a;a+=4){this.incCounter(n);const i=t.encrypt(n);e[a]^=i[0],e[a+1]^=i[1],e[a+2]^=i[2],e[a+3]^=i[3]}return S.clamp(e,r)}},Oe=P.hmacSha1;let _e=G&&me&&typeof E.importKey==X,ye=G&&me&&typeof E.deriveBits==X;class je extends k{constructor({password:e,rawPassword:n,signed:s,encryptionStrength:r,checkPasswordOnly:a}){super({start(){z.assign(this,{ready:new N(i=>this.resolveReady=i),password:ze(e,n),signed:s,strength:r-1,pending:new g})},async transform(i,l){const h=this,{password:c,strength:o,resolveReady:u,ready:f}=h;c?(await(async(p,w,m,b)=>{const C=await Se(p,w,m,H(b,0,W[w])),R=H(b,W[w]);if(C[0]!=R[0]||C[1]!=R[1])throw new y(fe)})(h,o,c,H(i,0,W[o]+2)),i=H(i,W[o]+2),a?l.error(new y(de)):u()):await f;const d=new g(i.length-q-(i.length-q)%T);l.enqueue(be(h,i,d,0,q,!0))},async flush(i){const{signed:l,ctr:h,hmac:c,pending:o,ready:u}=this;if(c&&h){await u;const f=H(o,0,o.length-q),d=H(o,o.length-q);let p=new g;if(f.length){const w=L(B,f);c.update(w);const m=h.update(w);p=D(B,m)}if(l){const w=H(D(B,c.digest()),0,q);for(let m=0;q>m;m++)if(w[m]!=d[m])throw new y(pe)}i.enqueue(p)}}})}}class Ge extends k{constructor({password:e,rawPassword:n,encryptionStrength:s}){let r;super({start(){z.assign(this,{ready:new N(a=>this.resolveReady=a),password:ze(e,n),strength:s-1,pending:new g})},async transform(a,i){const l=this,{password:h,strength:c,resolveReady:o,ready:u}=l;let f=new g;h?(f=await(async(p,w,m)=>{const b=we(new g(W[w]));return Y(b,await Se(p,w,m,b))})(l,c,h),o()):await u;const d=new g(f.length+a.length-a.length%T);d.set(f,0),i.enqueue(be(l,a,d,f.length,0))},async flush(a){const{ctr:i,hmac:l,pending:h,ready:c}=this;if(l&&i){await c;let o=new g;if(h.length){const u=i.update(L(B,h));l.update(u),o=D(B,u)}r.signature=D(B,l.digest()).slice(0,q),a.enqueue(Y(o,r.signature))}}}),r=this}}function be(t,e,n,s,r,a){const{ctr:i,hmac:l,pending:h}=t,c=e.length-r;let o;for(h.length&&(e=Y(h,e),n=((u,f)=>{if(f&&f>u.length){const d=u;(u=new g(f)).set(d,0)}return u})(n,c-c%T)),o=0;c-T>=o;o+=T){const u=L(B,H(e,o,o+T));a&&l.update(u);const f=i.update(u);a||l.update(f),n.set(D(B,f),o+s)}return t.pending=H(e,o),n}async function Se(t,e,n,s){t.password=null;const r=await(async(o,u,f,d,p)=>{if(!_e)return P.importKey(u);try{return await E.importKey("raw",u,f,!1,p)}catch{return _e=!1,P.importKey(u)}})(0,n,De,0,Le),a=await(async(o,u,f)=>{if(!ye)return P.pbkdf2(u,o.salt,Q.iterations,f);try{return await E.deriveBits(o,u,f)}catch{return ye=!1,P.pbkdf2(u,o.salt,Q.iterations,f)}})(z.assign({salt:s},Q),r,8*(2*M[e]+2)),i=new g(a),l=L(B,H(i,0,M[e])),h=L(B,H(i,M[e],2*M[e])),c=H(i,2*M[e]);return z.assign(t,{keys:{key:l,authentication:h,passwordVerification:c},ctr:new Ne(new Fe(l),re.from(Ze)),hmac:new Oe(h)}),c}function ze(t,e){return e===le?(n=>{if(typeof ce==O){const s=new g((n=unescape(encodeURIComponent(n))).length);for(let r=0;r<s.length;r++)s[r]=n.charCodeAt(r);return s}return new ce().encode(n)})(t):e}function Y(t,e){let n=t;return t.length+e.length&&(n=new g(t.length+e.length),n.set(t,0),n.set(e,t.length)),n}function H(t,e,n){return t.subarray(e,n)}function D(t,e){return t.fromBits(e)}function L(t,e){return t.toBits(e)}class Xe extends k{constructor({password:e,passwordVerification:n,checkPasswordOnly:s}){super({start(){z.assign(this,{password:e,passwordVerification:n}),He(this,e)},transform(r,a){const i=this;if(i.password){const l=ke(i,r.subarray(0,12));if(i.password=null,l.at(-1)!=i.passwordVerification)throw new y(fe);r=r.subarray(12)}s?a.error(new y(de)):a.enqueue(ke(i,r))}})}}class Je extends k{constructor({password:e,passwordVerification:n}){super({start(){z.assign(this,{password:e,passwordVerification:n}),He(this,e)},transform(s,r){const a=this;let i,l;if(a.password){a.password=null;const h=we(new g(12));h[11]=a.passwordVerification,i=new g(s.length+h.length),i.set(ve(a,h),0),l=12}else i=new g(s.length),l=0;i.set(ve(a,s),l),r.enqueue(i)}})}}function ke(t,e){const n=new g(e.length);for(let s=0;s<e.length;s++)n[s]=Ce(t)^e[s],$(t,n[s]);return n}function ve(t,e){const n=new g(e.length);for(let s=0;s<e.length;s++)n[s]=Ce(t)^e[s],$(t,e[s]);return n}function He(t,e){const n=[305419896,591751049,878082192];z.assign(t,{keys:n,crcKey0:new J(n[0]),crcKey2:new J(n[2])});for(let s=0;s<e.length;s++)$(t,e.charCodeAt(s))}function $(t,e){let[n,s,r]=t.keys;t.crcKey0.append([e]),n=~t.crcKey0.get(),s=Ae(I.imul(Ae(s+Be(n)),134775813)+1),t.crcKey2.append([s>>>24]),r=~t.crcKey2.get(),t.keys=[n,s,r]}function Ce(t){const e=2|t.keys[2];return Be(I.imul(e,1^e)>>>8)}function Be(t){return 255&t}function Ae(t){return 4294967295&t}class Qe extends k{constructor(e,{chunkSize:n,CompressionStreamZlib:s,CompressionStream:r}){super({});const{compressed:a,encrypted:i,useCompressionStream:l,zipCrypto:h,signed:c,level:o}=e,u=this;let f,d,p=super.readable;i&&!h||!c||(f=new he,p=A(p,f)),a&&(p=Ie(p,l,{level:o,chunkSize:n},r,s,r)),i&&(h?p=A(p,new Je(e)):(d=new Ge(e),p=A(p,d))),Re(u,p,()=>{let w;i&&!h&&(w=d.signature),i&&!h||!c||(w=new F(f.value.buffer).getUint32(0)),u.signature=w})}}class Ye extends k{constructor(e,{chunkSize:n,DecompressionStreamZlib:s,DecompressionStream:r}){super({});const{zipCrypto:a,encrypted:i,signed:l,signature:h,compressed:c,useCompressionStream:o,deflate64:u}=e;let f,d,p=super.readable;i&&(a?p=A(p,new Xe(e)):(d=new je(e),p=A(p,d))),c&&(p=Ie(p,o,{chunkSize:n,deflate64:u},r,s,r)),i&&!a||!l||(f=new he,p=A(p,f)),Re(this,p,()=>{if((!i||a)&&l){const w=new F(f.value.buffer);if(h!=w.getUint32(0,!1))throw new y(pe)}})}}function Re(t,e,n){e=A(e,new k({flush:n})),z.defineProperty(t,"readable",{get:()=>e})}function Ie(t,e,n,s,r,a){const i=e&&s?s:r||a,l=n.deflate64?"deflate64-raw":"deflate-raw";try{t=A(t,new i(l,n))}catch(h){if(!e)throw h;if(r)t=A(t,new r(l,n));else{if(!a)throw h;t=A(t,new a(l,n))}}return t}function A(t,e){return t.pipeThrough(e)}const qe="data",Ke="close";class $e extends k{constructor(e,n){super({});const s=this,{codecType:r}=e;let a;r.startsWith("deflate")?a=Qe:r.startsWith("inflate")&&(a=Ye),s.outputSize=0;let i=0;const l=new a(e,n),h=super.readable,c=new k({transform(u,f){u&&u.length&&(i+=u.length,f.enqueue(u))},flush(){z.assign(s,{inputSize:i})}}),o=new k({transform(u,f){if(u&&u.length&&(f.enqueue(u),s.outputSize+=u.length,e.outputSize!==le&&s.outputSize>e.outputSize))throw new y("Invalid uncompressed size")},flush(){const{signature:u}=l;z.assign(s,{signature:u,inputSize:i})}});z.defineProperty(s,"readable",{get:()=>h.pipeThrough(c).pipeThrough(l).pipeThrough(o)})}}class et extends k{constructor(e){let n;super({transform:function s(r,a){if(n){const i=new g(n.length+r.length);i.set(n),i.set(r,n.length),r=i,n=null}r.length>e?(a.enqueue(r.slice(0,e)),s(r.slice(e),a)):n=r},flush(s){n&&n.length&&s.enqueue(n)}})}}const ee=new oe,te=new oe;let ne,_,V,v,Z,K=0;async function tt(t){try{const{options:e,config:n}=t;if(!e.useCompressionStream)try{await self.initModule(t.config)}catch{e.useCompressionStream=!0}n.CompressionStream=self.CompressionStream,n.DecompressionStream=self.DecompressionStream;const s={highWaterMark:1},r=t.readable||new xe({async pull(u){const f=new N(w=>ee.set(K,w));se({type:"pull",messageId:K}),K=(K+1)%ie.MAX_SAFE_INTEGER;const{value:d,done:p}=await f;u.enqueue(d),p&&u.close()}},s),a=t.writable||new Ue({async write(u){let f;const d=new N(p=>f=p);te.set(K,f),se({type:qe,value:u,messageId:K}),K=(K+1)%ie.MAX_SAFE_INTEGER,await d}},s),i=new $e(e,n);ne=new AbortController;const{signal:l}=ne;await r.pipeThrough(i).pipeThrough(new et(n.chunkSize)).pipeTo(a,{signal:l,preventClose:!0,preventAbort:!0}),await a.getWriter().close();const{signature:h,inputSize:c,outputSize:o}=i;se({type:Ke,result:{signature:h,inputSize:c,outputSize:o}})}catch(e){e.outputSize=0,Pe(e)}}function se(t){let{value:e}=t;if(e)if(e.length)try{e=new g(e),t.value=e.buffer,U(t,[t.value])}catch{U(t)}else U(t);else U(t)}function Pe(t=new y("Unknown error")){const{message:e,stack:n,code:s,name:r,outputSize:a}=t;U({error:{message:e,stack:n,code:s,name:r,outputSize:a}})}function Te(t,e,n={}){const s=typeof n.level=="number"?n.level:-1,r=typeof n.outBuffer=="number"?n.outBuffer:65536,a=typeof n.inBufferSize=="number"?n.inBufferSize:65536;return new k({start(){let i;if(this.out=V(r),this.in=V(a),this.inBufferSize=a,this._scratch=new g(r),t?(this._process=_.deflate_process,this._last_consumed=_.deflate_last_consumed,this._end=_.deflate_end,this.streamHandle=_.deflate_new(),i=e==="gzip"?_.deflate_init_gzip(this.streamHandle,s):e==="deflate-raw"?_.deflate_init_raw(this.streamHandle,s):_.deflate_init(this.streamHandle,s)):e==="deflate64-raw"?(this._process=_.inflate9_process,this._last_consumed=_.inflate9_last_consumed,this._end=_.inflate9_end,this.streamHandle=_.inflate9_new(),i=_.inflate9_init_raw(this.streamHandle)):(this._process=_.inflate_process,this._last_consumed=_.inflate_last_consumed,this._end=_.inflate_end,this.streamHandle=_.inflate_new(),i=e==="deflate-raw"?_.inflate_init_raw(this.streamHandle):e==="gzip"?_.inflate_init_gzip(this.streamHandle):_.inflate_init(this.streamHandle)),i!==0)throw new y("init failed:"+i)},transform(i,l){try{const h=i,c=new g(Z.buffer),o=this._process,u=this._last_consumed,f=this.out,d=this._scratch;let p=0;for(;p<h.length;){const w=I.min(h.length-p,32768);this.in&&this.inBufferSize>=w||(this.in&&v&&v(this.in),this.in=V(w),this.inBufferSize=w),c.set(h.subarray(p,p+w),this.in);const m=o(this.streamHandle,this.in,w,f,r,0);if(!t&&0>m)throw new y("process error:"+m);const b=16777215&m;b&&(d.set(c.subarray(f,f+b),0),l.enqueue(d.slice(0,b)));const C=u(this.streamHandle);if(C===0)break;p+=C}}catch(h){this._end&&this.streamHandle&&this._end(this.streamHandle),this.in&&v&&v(this.in),this.out&&v&&v(this.out),l.error(h)}},flush(i){try{const l=new g(Z.buffer),h=this._process,c=this.out,o=this._scratch;for(;;){const u=h(this.streamHandle,0,0,c,r,4);if(!t&&0>u)throw new y("process error:"+u);const f=16777215&u,d=u>>24&255;if(f&&(o.set(l.subarray(c,c+f),0),i.enqueue(o.slice(0,f))),d===1||f===0)break}}catch(l){i.error(l)}finally{if(this._end&&this.streamHandle){const l=this._end(this.streamHandle);l!==0&&i.error(new y("end error:"+l))}this.in&&v&&v(this.in),this.out&&v&&v(this.out)}}})}addEventListener("message",({data:t})=>{const{type:e,messageId:n,value:s,done:r}=t;try{if(e=="start"&&tt(t),e==qe){const a=ee.get(n);ee.delete(n),a({value:new g(s),done:r})}if(e=="ack"){const a=te.get(n);te.delete(n),a()}e==Ke&&ne.abort()}catch(a){Pe(a)}});class nt{constructor(e="deflate",n){return Te(!0,e,n)}}class st{constructor(e="deflate",n){return Te(!1,e,n)}}let Ve=!1;self.initModule=async t=>{try{const e=await(async(n,{baseURI:s})=>{if(!Ve){let r,a;try{try{a=new URL(n,s)}catch{}r=await(await fetch(a)).arrayBuffer()}catch(i){if(!n.startsWith("data:application/wasm;base64,"))throw i;r=(l=>{const h=l.split(",")[1],c=atob(h),o=c.length,u=new g(o);for(let f=0;o>f;++f)u[f]=c.charCodeAt(f);return u.buffer})(n)}(i=>{if(_=i,{malloc:V,free:v,memory:Z}=_,typeof V!="function"||typeof v!="function"||!Z)throw _=V=v=Z=null,new y("Invalid WASM module")})((await WebAssembly.instantiate(r)).instance.exports),Ve=!0}})(t.wasmURI,t);return t.CompressionStreamZlib=nt,t.DecompressionStreamZlib=st,e}catch{}}})();
